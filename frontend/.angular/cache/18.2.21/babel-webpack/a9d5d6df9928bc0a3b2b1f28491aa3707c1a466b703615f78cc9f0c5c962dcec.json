{"ast":null,"code":"import { Router } from '@angular/router';\nimport { AuthService } from '../../services/auth.service';\nimport { TasksService } from '../../services/tasks.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/tasks.service\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = (a0, a1, a2) => ({\n  ok: a0,\n  mid: a1,\n  low: a2\n});\nfunction HomeComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 4)(1, \"h3\", 5);\n    i0.ÉµÉµtext(2, \"\\u00BFQu\\u00E9 puedes hacer aqu\\u00ED?\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"ul\", 6)(4, \"li\");\n    i0.ÉµÉµtext(5, \"Crear y organizar tareas por \");\n    i0.ÉµÉµelementStart(6, \"b\");\n    i0.ÉµÉµtext(7, \"prioridad\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtext(8, \" y \");\n    i0.ÉµÉµelementStart(9, \"b\");\n    i0.ÉµÉµtext(10, \"fecha l\\u00EDmite\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtext(11, \".\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(12, \"li\");\n    i0.ÉµÉµtext(13, \"Marcar como completadas y filtrar por estado.\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(14, \"li\");\n    i0.ÉµÉµtext(15, \"Resumen de progreso y pr\\u00F3ximas tareas.\");\n    i0.ÉµÉµelementEnd()()();\n  }\n}\nfunction HomeComponent_div_9_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 12);\n    i0.ÉµÉµtext(1, \"Cargando tus tareas\\u2026\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction HomeComponent_div_9_ng_container_7_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 21)(1, \"div\", 22);\n    i0.ÉµÉµelement(2, \"div\", 23);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"div\", 24);\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ÉµÉµnextContext(3);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµstyleProp(\"width\", ctx_r0.progress.pct, \"%\");\n    i0.ÉµÉµproperty(\"ngClass\", i0.ÉµÉµpureFunction3(6, _c0, ctx_r0.progress.tone === \"ok\", ctx_r0.progress.tone === \"mid\", ctx_r0.progress.tone === \"low\"));\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate3(\" \", ctx_r0.counts.done, \" de \", ctx_r0.counts.total, \" (\", ctx_r0.progress.pct, \"%) completadas \");\n  }\n}\nfunction HomeComponent_div_9_ng_container_7_li_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"li\")(1, \"span\", 25);\n    i0.ÉµÉµtext(2);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"span\", 26);\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµpipe(5, \"date\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(6, \"span\", 27);\n    i0.ÉµÉµtext(7);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const t_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ÉµÉµnextContext(3);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(t_r2.title);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate1(\"vence: \", i0.ÉµÉµpipeBind2(5, 3, t_r2.dueDate, \"shortDate\"), \"\");\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(ctx_r0.priorityLabel(t_r2.priority));\n  }\n}\nfunction HomeComponent_div_9_ng_container_7_li_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"li\", 28);\n    i0.ÉµÉµtext(1, \"Sin tareas pr\\u00F3ximas.\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction HomeComponent_div_9_ng_container_7_li_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"li\")(1, \"span\", 25);\n    i0.ÉµÉµtext(2);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"span\", 29);\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµpipe(5, \"date\");\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const t_r3 = ctx.$implicit;\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(t_r3.title);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(i0.ÉµÉµpipeBind2(5, 2, t_r3.createdAt, \"short\"));\n  }\n}\nfunction HomeComponent_div_9_ng_container_7_li_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"li\", 28);\n    i0.ÉµÉµtext(1, \"A\\u00FAn no has creado tareas.\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction HomeComponent_div_9_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementContainerStart(0);\n    i0.ÉµÉµelementStart(1, \"div\", 13)(2, \"span\", 14);\n    i0.ÉµÉµtext(3, \"Total: \");\n    i0.ÉµÉµelementStart(4, \"b\");\n    i0.ÉµÉµtext(5);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(6, \"span\", 14);\n    i0.ÉµÉµtext(7, \"Pendientes: \");\n    i0.ÉµÉµelementStart(8, \"b\");\n    i0.ÉµÉµtext(9);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(10, \"span\", 14);\n    i0.ÉµÉµtext(11, \"Completadas: \");\n    i0.ÉµÉµelementStart(12, \"b\");\n    i0.ÉµÉµtext(13);\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµtemplate(14, HomeComponent_div_9_ng_container_7_div_14_Template, 5, 10, \"div\", 15);\n    i0.ÉµÉµelementStart(15, \"div\", 16)(16, \"div\")(17, \"h4\", 17);\n    i0.ÉµÉµtext(18, \"Pr\\u00F3ximas (7 d\\u00EDas)\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(19, \"ul\", 18);\n    i0.ÉµÉµtemplate(20, HomeComponent_div_9_ng_container_7_li_20_Template, 8, 6, \"li\", 19)(21, HomeComponent_div_9_ng_container_7_li_21_Template, 2, 0, \"li\", 20);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(22, \"div\")(23, \"h4\", 17);\n    i0.ÉµÉµtext(24, \"\\u00DAltimas creadas\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(25, \"ul\", 18);\n    i0.ÉµÉµtemplate(26, HomeComponent_div_9_ng_container_7_li_26_Template, 6, 5, \"li\", 19)(27, HomeComponent_div_9_ng_container_7_li_27_Template, 2, 0, \"li\", 20);\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(ctx_r0.counts.total);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate(ctx_r0.counts.pending);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate(ctx_r0.counts.done);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r0.counts.total > 0);\n    i0.ÉµÉµadvance(6);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r0.soonTasks);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r0.soonTasks.length === 0);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r0.recentTasks);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r0.recentTasks.length === 0);\n  }\n}\nfunction HomeComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 4)(1, \"div\", 7)(2, \"h3\", 8);\n    i0.ÉµÉµtext(3, \"Resumen r\\u00E1pido\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(4, \"a\", 9);\n    i0.ÉµÉµtext(5, \"Ir al Dashboard\");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµtemplate(6, HomeComponent_div_9_div_6_Template, 2, 0, \"div\", 10)(7, HomeComponent_div_9_ng_container_7_Template, 28, 8, \"ng-container\", 11);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(6);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r0.loading);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", !ctx_r0.loading);\n  }\n}\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(auth, router, tasksService) {\n      this.auth = auth;\n      this.router = router;\n      this.tasksService = tasksService;\n      // Estado mÃ­nimo para el resumen\n      this.tasks = [];\n      this.loading = false;\n    }\n    ngOnInit() {\n      if (this.auth.isLoggedIn()) {\n        this.loading = true;\n        this.tasksService.list().subscribe({\n          next: data => {\n            this.tasks = data || [];\n            this.loading = false;\n          },\n          error: () => {\n            this.loading = false;\n          }\n        });\n      }\n    }\n    goNext() {\n      this.router.navigate([this.auth.isLoggedIn() ? '/dashboard' : '/auth']);\n    }\n    // --- Derivados para la UI ---\n    get counts() {\n      const total = this.tasks.length;\n      const done = this.tasks.filter(t => t.done).length;\n      return {\n        total,\n        done,\n        pending: total - done\n      };\n    }\n    get progress() {\n      const {\n        total,\n        done\n      } = this.counts;\n      const pct = total ? Math.round(done / total * 100) : 0;\n      const tone = pct >= 80 ? 'ok' : pct >= 40 ? 'mid' : 'low';\n      return {\n        pct,\n        tone\n      };\n    }\n    get soonTasks() {\n      const now = new Date();\n      const in7 = new Date();\n      in7.setDate(now.getDate() + 7);\n      return this.tasks.filter(t => t.dueDate && !t.done && new Date(t.dueDate) <= in7).sort((a, b) => +new Date(a.dueDate) - +new Date(b.dueDate)).slice(0, 3);\n    }\n    get recentTasks() {\n      return [...this.tasks].sort((a, b) => +new Date(b.createdAt) - +new Date(a.createdAt)).slice(0, 3);\n    }\n    priorityLabel(p) {\n      return p === 'high' ? 'ðŸ”´ Alta' : p === 'med' ? 'ðŸŸ¡ Media' : 'ðŸŸ¢ Baja';\n    }\n    static {\n      this.Éµfac = function HomeComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || HomeComponent)(i0.ÉµÉµdirectiveInject(i1.AuthService), i0.ÉµÉµdirectiveInject(i2.Router), i0.ÉµÉµdirectiveInject(i3.TasksService));\n      };\n    }\n    static {\n      this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n        type: HomeComponent,\n        selectors: [[\"app-home\"]],\n        decls: 10,\n        vars: 3,\n        consts: [[1, \"card\"], [1, \"row\", \"mt-3\"], [1, \"btn\", 3, \"click\"], [\"class\", \"card mt-3\", 4, \"ngIf\"], [1, \"card\", \"mt-3\"], [2, \"margin\", \"0 0 8px 0\"], [1, \"feature-list\"], [1, \"space-between\"], [2, \"margin\", \"0\"], [\"routerLink\", \"/dashboard\", 1, \"btn\", \"secondary\"], [\"class\", \"muted mt-2\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"muted\", \"mt-2\"], [1, \"badges\", \"mt-2\"], [1, \"badge\"], [\"class\", \"progress-wrap mt-2\", 4, \"ngIf\"], [1, \"grid\", \"mt-3\"], [1, \"box-title\"], [1, \"list-simple\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"muted\", 4, \"ngIf\"], [1, \"progress-wrap\", \"mt-2\"], [1, \"progress\"], [1, \"progress-bar\", 3, \"ngClass\"], [1, \"progress-label\"], [1, \"title\"], [1, \"pill\", \"warn\"], [1, \"pill\"], [1, \"muted\"], [1, \"muted\", \"small\"]],\n        template: function HomeComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ÉµÉµtext(2, \"Bienvenido \\uD83D\\uDC4B\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(3, \"p\");\n            i0.ÉµÉµtext(4, \" Este es un mini gestor de tareas con usuarios (registro/login con JWT) construido en Angular + Node + MongoDB. \");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(5, \"div\", 1)(6, \"button\", 2);\n            i0.ÉµÉµlistener(\"click\", function HomeComponent_Template_button_click_6_listener() {\n              return ctx.goNext();\n            });\n            i0.ÉµÉµtext(7);\n            i0.ÉµÉµelementEnd()()();\n            i0.ÉµÉµtemplate(8, HomeComponent_div_8_Template, 16, 0, \"div\", 3)(9, HomeComponent_div_9_Template, 8, 2, \"div\", 3);\n          }\n          if (rf & 2) {\n            i0.ÉµÉµadvance(7);\n            i0.ÉµÉµtextInterpolate1(\" \", ctx.auth.isLoggedIn() ? \"Ir al Dashboard\" : \"Comenzar\", \" \");\n            i0.ÉµÉµadvance();\n            i0.ÉµÉµproperty(\"ngIf\", !ctx.auth.isLoggedIn());\n            i0.ÉµÉµadvance();\n            i0.ÉµÉµproperty(\"ngIf\", ctx.auth.isLoggedIn());\n          }\n        },\n        dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i2.RouterLink, i4.DatePipe],\n        styles: [\".feature-list[_ngcontent-%COMP%]{margin:8px 0 0 16px}.feature-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:6px 0}.badges[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.badge[_ngcontent-%COMP%]{display:inline-block;background:#eef2ff;color:#3730a3;border:1px solid #c7d2fe;padding:6px 10px;border-radius:999px;font-size:.9rem}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:12px}@media (min-width: 720px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.list-simple[_ngcontent-%COMP%]{list-style:none;padding:0;margin:6px 0 0}.list-simple[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 0;border-bottom:1px dashed #e5e7eb}.list-simple[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:0}.title[_ngcontent-%COMP%]{font-weight:600}.small[_ngcontent-%COMP%]{font-size:.85rem}.muted[_ngcontent-%COMP%]{color:var(--muted)}.pill[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:999px;background:#f3f4f6;color:#374151;font-size:12px;border:1px solid #e5e7eb}.pill.warn[_ngcontent-%COMP%]{background:#fff7ed;color:#7c2d12;border-color:#fed7aa}.box-title[_ngcontent-%COMP%]{margin:0 0 6px}.progress-wrap[_ngcontent-%COMP%]{display:grid;gap:6px}.progress[_ngcontent-%COMP%]{width:100%;height:10px;background:#e5e7eb;border-radius:999px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{height:100%;width:0%;border-radius:999px;transition:width .3s ease;background:var(--primary)}.progress-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--muted)}.progress-bar.ok[_ngcontent-%COMP%]{background:#16a34a}.progress-bar.mid[_ngcontent-%COMP%]{background:#f59e0b}.progress-bar.low[_ngcontent-%COMP%]{background:#9ca3af}body.dark[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#0b1220;color:#c7d2fe;border-color:#374151}body.dark[_ngcontent-%COMP%]   .list-simple[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-color:#334155}body.dark[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]{background:#0b1220;color:#e5e7eb;border-color:#334155}body.dark[_ngcontent-%COMP%]   .pill.warn[_ngcontent-%COMP%]{background:#3f2d1c;color:#fde68a;border-color:#6b4a2e}body.dark[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background:#334155}\"]\n      });\n    }\n  }\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}